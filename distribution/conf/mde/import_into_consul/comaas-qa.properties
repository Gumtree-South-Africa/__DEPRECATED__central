replyts.tenant=mde

# TODO Remove port once Nomad dynamic port config is merged
replyts.http.port=8092

mailcloaking.domains=mail.gemaaktvoorelkaar.nl

mailcloaking.localized.buyer=a
mailcloaking.localized.seller=b
# yes, it's really sepErator
mailcloaking.seperator=-

sendername.buyer.name.pattern=%s via Marktplaats
sendername.seller.name.pattern=%s via Marktplaats

mailreceiver.filesystem.dropfolder=dropfolder
mailreceiver.retries=5
mailreceiver.retrydelay.minutes=5

replyts2.sendHeld.retentionTimeHours=1

anonymizebody.pattern.0=\\b(?:<b>)?(From|To|Sender|Receiver|Van|Aan) *: *(?:</b>)? *<a[^>]+href="mailto:[^">]+@[^">]+"[^>]*>[^<]*</a
anonymizebody.pattern.1=\\b(?:<b>)?(From|To|Sender|Receiver|Van|Aan) *: *(?:</b>)? *(?:<[:a-z]+[^>]*>)?[^<>\\s]+@[^<>\\s]+(?:</[:a-z]+>)?
anonymizebody.pattern.2=<span[^>]*>(From|To|Sender|Receiver|Van|Aan) *: *</span *>[^<>]*(?:<[:a-z]+[^>]*>){0,2}[^<>\\s]+@[^<>\\s]+(?:</[:a-z]+>){0,2}
anonymizebody.pattern.3=<b><span[^>]*>(From|To|Sender|Receiver|Van|Aan) *: *</span *></b> *(?:<[:a-z]+[^>]*>)?[^<>\\s]+@[^<>\\s]+(?:</[:a-z]+>)?
anonymizebody.pattern.4=<span[^>]*><b>(From|To|Sender|Receiver|Van|Aan) *: *</b></span *> *(?:<[:a-z]+[^>]*>)?[^<>\\s]+@[^<>\\s]+(?:</[:a-z]+>)?
anonymizebody.pattern.5=\\b(From|To|Sender|Receiver|Van|Aan) *: *(<|&lt;)?[^<>\\s]+@[^<>\\s]+(>|&gt;)?
anonymizebody.pattern.6=\\b(From|To|Sender|Receiver|Van|Aan) *: *([^<>\\s]+ +){1,6}(<|&lt;)?[^<>\\s]+@[^<>\\s]+((<|&lt;)[^<>\\s]+@[^<>\\s]+(>|&gt;))?(>|&gt;)?
anonymizebody.pattern.7=\\b(From|To|Sender|Receiver|Van|Aan) *: *([^<>\\s]+ +){0,5}([^<>\\s]+)(<|&lt;)?[^<>\\s]+@[^<>\\s]+(>|&gt;)?
anonymizebody.pattern.8=Op.{10,25}schreef[^<]{5,60}<a[^>]+href="mailto:[^">]+@[^">]+"[^>]*>[^<]*</a
anonymizebody.pattern.9=Op.{10,25}schreef[^<]{5,60}(<|&lt;)?\\s*[^<>\\s]+@[^<>\\s]+(>|&gt;)?

urlgateway.gatewayurl=http://www.marktplaats.nl/gateway.html?url=[url]
urlgateway.skipdomains.0=*.marktplaats.nl
urlgateway.skipdomains.1=*.marktplaats.com
urlgateway.skipdomains.2=marktplaats.custhelp.com
urlgateway.skipdomains.3=www.marktplaatsmanieren.nl
urlgateway.skipdomains.4=images.emessaging.nl
urlgateway.skipdomains.5=www.websitevanhetjaar.nl
urlgateway.skipdomains.6=www.mijnpolitie.nl
urlgateway.skipdomains.7=marktplaats.force.com
urlgateway.skipdomains.8=marktplaats.emsecure.net

replyts.threadpool.size=32
replyts.maxConversationAgeDays=180

# Filesystem based delivery
delivery.filesystem.outputdir=dropfolder/output
delivery.filesystem.temp.prefix=.
delivery.filesystem.prefix=processed_
delivery.filesystem.postfix=.mail

# SMTP based mail delivery
delivery.smtp.host=localhost
delivery.smtp.port=10035
delivery.smtp.username=
delivery.smtp.password=

# How/where to persist to
persistence.strategy=riak

# Riak
# Hosts list is a comma separated list of host names or ip addresses.
# for 2.16
persistence.riak.datacenter.primary.hosts=riak002
persistence.riak.bucket.name.prefix=mde
persistence.riak.pb.port=8087
persistence.riak.maxConnectionsToRiakCluster=1
persistence.riak.connectionPoolSizePerRiakHost=1
persistence.riak.connectionTimeoutMs=1000
persistence.riak.requestTimeoutMs=5000
persistence.riak.idleConnectionTimeoutMs=60000
#Riak sanity checks
sanity.riak.http.port=8098
riak.cluster.monitor.enabled=false

# Cassandra config

persistence.cassandra.endpoint=cass001:9042,cass002:9042,cass003:9042,cass004:9042,cass005:9042
persistence.cassandra.dc=ams1
persistence.cassandra.username=
persistence.cassandra.password=
persistence.cassandra.keyspace=comaas_mde
persistence.cassandra.consistency.read=LOCAL_QUORUM
persistence.cassandra.consistency.write=LOCAL_QUORUM
persistence.cassandra.keyspace.create.template="NOT SUPPORTED HERE"
persistence.cassandra.idleTimeoutSeconds=120
persistence.cassandra.jobs.idleTimeoutSeconds=600

# Elastic Search

search.es.indexname=replyts_mde
search.es.clustername=comaasqa
search.es.endpoints=esdata002:9300,esdata001:9300

#Elastic search sanity checks
sanity.es.timeframehours=1
sanity.es.endpoints=${search.es.endpoints}
sanity.es.cluster=${search.es.clustername}

# kafka
replyts.event.publisher.kafka.enabled = false
replyts.kafka.broker.list =
replyts.kafka.topic = conversations

# built-in plugins
# Graphite
graphite.endpoint.hostname=carbon.service.consul
graphite.prefix=mo
graphite.enabled=false

# messagebox
messagebox.userid.userIdentifierStrategy=BY_USER_ID
messagebox.userid.by_user_id.customValueNameForBuyer=from-userid
messagebox.userid.by_user_id.customValueNameForSeller=to-userid

######################################################################
# Other custom properties
######################################################################

replyts.indexer.type=streaming
replyts.indexer.streaming.threadcount=16
replyts.indexer.streaming.queue.size=1000000
replyts.indexer.streaming.conversationid.batch.size=5000

replyts2.cronjob.cleanupMail.enabled=false
replyts2.cronjob.cleanupConversation.enabled=false

replyts.mobile.badword.csFilterServiceEndpoint=http://UNSET_PROPERTY/


node.passive=true

### PLUGINS SPECIFIC TO Mde TENANT ###############################

#######################################
#######################################
# eBay Service Filters Configuration
# performs iprisk, userstate and ip2country checks by talking to some ebay apis.
# be aware that we have different tokens for different services

#replyts2-ebayservicesfilters-plugin.ip.appname=eBay2ab6b-3686-4725-937e-8fd19cf8ba0
#replyts2-ebayservicesfilters-plugin.ip.iaftoken=v^1.1#i^1#I^3#f^0#p^1#r^1#t^Ul4yXzMxNkVEQTVGRjEzRkUwNTRFRjBBRjYxOTgzQjFEQkMxI0VeMjYw

# appname for user plugin seems to be empty? if not, probably the same as ip service?!
#replyts2-ebayservicesfilters-plugin.user.appname=
#replyts2-ebayservicesfilters-plugin.user.iaftoken=v^1.1#i^1#f^0#p^1#r^1#I^3#t^Ul4yX0IyNDhDOUUzMzhDMzg3NDJGODcyOEM2Q0Y5MTVERUZCI0VeMjYw

#comma seperated list of whitelisted domains. Subdomains will also be whitelisted
#replyts.linkescaper.whitelist=ebay.com,ebay.de,mobile.de,brands4friends.de,afterbuy.de,paypal.de,paypal.com

############################################
# Message Modifier Plugin
############################################

# selection types:
#   x+ (all messages starting with the x-th message; 0+ = all messages)
#   i (all messages sent by the conversation's initiator (messages_ 0,2,4,6,...)
#   r (all messages sent by the replier (messages: 1,3,5,7,...)
#   x,y,z,... (all messages with index x,y,z,... starting with index 0)
replyts2-message-modifier.selection.type=1
# start- and end-tags of message part which shall be removed (note: the tags are removed too!)
replyts2-message-modifier.starttags=<!-- replydelstart -->,<![CDATA[replydelstart]]>,<div class="replydelstart">
replyts2-message-modifier.endtags=<!-- replydelend -->,<![CDATA[replydelend]]>,<span class="replydelend"></span></div>
# text which is filled into the gap (may not be empty!)
replyts2-message-modifier.replacements= , ,
# currently not in use:
#replyts2-message-modifier.filter=X-ADID:^NC-DR-.+$

replyts.mobile.fsbo.fraud.fsboCsWebserviceUrl=http://UNSET_PROPERTY/fsbocs-api/
rabbitMQ.hosts=UNSET_PROPERTY


######################################
# Unique Buyer Id Plugin
######################################
replyts.uniqueid.pepper=E2Axql3d3P01aYmdew3817289DDc$qiypmHEDdFghW
replyts.uniqueid.order=150
replyts.uniqueid.ignoredBuyerAddresses=noreply@team.mobile.de, noreply@automobile.it, noreply@automobile.fr

######################################
# Add Metadata Plugin
######################################
replyts.mobilede.addmetadata.plugin.order=201

reporting.mongodb.hosts=statmongo
reporting.mongodb.concurrency=10

mobilede.demand.reporting.plugin.order=990

######################################
# Coma Filter Service Plugin
######################################
replyts.mobile.comafilterservice.webserviceUrl=http://UNSET_PROPERTY:37001/coma-filter-service/
replyts.mobile.comafilterservice.active=true
mobilede.sms.plugin.order=999

######################################
# Dealer Rating Service Plugin
######################################
replyts.mobile.dealerRatingService.webserviceUrl=http://UNSET_PROPERTY/dealer-rating-service
replyts.mobile.dealerRatingService.active=true

######################################
# Demand Reporting Plugin
######################################

event.collector.service.url=http://UNSET_PROPERTY/event-collector-service/
replyts.outbound.event.collector.service.maxConnectionsPerRoute=2
replyts.outbound.event.collector.service.maxTotalConnections=1000
replyts.outbound.event.collector.service.connection.timeout.ms=4000
replyts.outbound.event.collector.service.socket.timeout.ms=10000

mobile.event.tracking.enabled=true
mobile.event.tracking.pool.size=5
mobile.event.tracking.buffer.size=2000
mobile.event.tracking.publishing.interval.in.seconds=10
